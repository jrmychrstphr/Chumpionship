<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> 

<html lang="en">
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8">
        <title>Title Goes Here</title>
        
        <style>
            @font-face {
                font-family: 'Champion';
                src: url('fonts/Champion HTFFlyweight Regular.otf');
                font-weight: 200;
            }
        
            @font-face {
                font-family: 'Champion';
                src: url('fonts/Champion HTFFeatherweight Regular.otf');
                font-weight: 400;
            }
        
            @font-face {
                font-family: 'Champion';
                src: url('fonts/Champion HTFMiddleweight Regular.otf');
                font-weight: 600;
            }
        
            @font-face {
                font-family: 'Champion';
                src: url('fonts/Champion HTFHeavyweight Regular.otf');
                font-weight: 800;
            }
            
            body {
                font-family: 'Champion'
            }
            
            .fly {
                font-weight: 200;
            }
            
            .feather {
                font-weight: 400;
            }
            
            .middle {
                font-weight: 600;
            }
            
            .heavy {
                font-weight: 800;
            }
            
            main {}
            
            #fixtures {
                background-image: linear-gradient(-90deg, #00FF00, #0000FF);
                width: 500px;
                margin: 0 auto;
                padding: 2em;
            }
            
            div.title-container {
                width: calc(100%-2em);
                background: black;
                padding: 1em 1em 0.5em;
                color: white;
                text-align: center;
            }
            
            h1 {
                text-transform: uppercase;
                font-weight: 400;
                font-size: 5em;
                margin: 0;
                line-height: 1em;
            }
            
            div.fixture-container {
                width: 100%;
                margin: 0 auto;
                text-align: center;
                border-bottom: 10px solid black;
            }
            
            div.fixture-content {
                //width: inherit;
            }
            
            div.team_name {
                display: inline-block;
                text-transform: uppercase;
            }
            
            div.fixture-content {
                margin: 0 0 -0.15em 0;
                padding: 0.5rem 0;
                line-height: 1em;   
            }
        
            
            
        </style>
        
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
        <script src="fitty.min.js"></script>
        
        <script>
            
            var database_url = "https://raw.githubusercontent.com/jrmychrstphr/Chumpionship/master/json/2020_database.json"
            
            
            $.getJSON(database_url, function(json) {
                
                console.log(json);
                
                var team_names = [];
                
                Object.keys(json).forEach(function(k){
                    team_names.push(json[k]["team name"]);
                });
                
                console.log(team_names)
                
                // randomise the list of team names
                team_names.sort(function(a, b){return 0.5 - Math.random()});
                
                // Populate the page with random fixtures
                
                for (i = 0; i < (team_names.length / 2); i++) { 
                    
                    var fixture_container = $( "#fixtures div.container" );
                    
                    var home_team = team_names[i]
                    var away_team = team_names[i+10]
                    
                    var fixture_container_div = document.createElement('div');
                    fixture_container_div.setAttribute('class', 'fixture-container');

                    var fixture_contents_div = document.createElement('div');
                    fixture_contents_div.setAttribute('class', 'fixture-content');
                    
                    var home_div = document.createElement('div');
                    home_div.setAttribute('class', 'team_name');
                    home_div.textContent = home_team;
                    
                    var away_div = document.createElement('div');
                    away_div.setAttribute('class', 'team_name');
                    away_div.textContent = away_team;
                    
                    
                    fixture_container.append(fixture_container_div);
                    fixture_container_div.append(fixture_contents_div);
                    fixture_contents_div.append(home_div, " vs ", away_div);
                    
                }
                
                // determine max and min character counts for fixtures
                
                var character_counts_array = [];
                var character_counts_total = 0;
                
                $("#fixtures div.container div.fixture").each( function() {
                    
                    //calculate character count
                    var character_count = $.trim($(this).text()).length;
                    console.log($(this).text(), character_count);
                    
                    character_counts_array.push(character_count);
                    character_counts_total += character_count;
                    
                });
                
                var character_count_avg = character_counts_total/character_counts_array.length;
                console.log("average", character_count_avg)
                
                //set style class based on character count
                $("#fixtures div.container div.fixture-content").each( function() {
                    var character_count = $.trim($(this).text()).length;
                    
/*
                    if ( character_count >= character_count_avg ) {
                        $(this).addClass("heavy")
                    } else {
                        $(this).addClass("feather")
                    }
*/
                    var font_styles = ["fly", "feather", "middle", "heavy"]
                    
                    $(this).addClass( function() {
                        
                        var x = font_styles[Math.floor(Math.random()*font_styles.length)]
                        console.log(x)
                        return x
                    
                    })
                    
                    
                    fitty(this);
                    
                });
                
                
                //var item = items[Math.floor(Math.random()*items.length)];
                
            });
            
            
        
        </script>
        
    </head> 
    
    <body> 
        <main>
            <section id="fixtures">
                <div class="container">
                    <div class="title-container"><h1>&#62;&#62; Gameweek <span id="gw">1</span> &#60;&#60;</h1></div>
                </div>
            </section>
        </main>
    </body> 
</html>